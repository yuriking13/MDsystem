# üöÄ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ MDsystem

–≠—Ç–æ—Ç PR –¥–æ–±–∞–≤–ª—è–µ—Ç –±–∞—Ç—á–∏–Ω–≥, –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å –∏ –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä—ã –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å—Ç–∞—Ç–µ–π.

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

| –û–ø–µ—Ä–∞—Ü–∏—è | –î–æ | –ü–æ—Å–ª–µ | –£—Å–∫–æ—Ä–µ–Ω–∏–µ |
|----------|-----|-------|-----------|
| –ü–µ—Ä–µ–≤–æ–¥ —Å—Ç–∞—Ç–µ–π | 0.5-1 —Å—Ç/—Å–µ–∫ | 2-5 —Å—Ç/—Å–µ–∫ | **4-10x** |
| Crossref –æ–±–æ–≥–∞—â–µ–Ω–∏–µ | ~1 —Å—Ç/—Å–µ–∫ | 4-8 —Å—Ç/—Å–µ–∫ | **4-8x** |
| AI –¥–µ—Ç–µ–∫—Ü–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ | 0.3-0.5 —Å—Ç/—Å–µ–∫ | 2-4 —Å—Ç/—Å–µ–∫ | **6-10x** |

## ‚ú® –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### Backend
- ‚úÖ **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞** —Å –∫–æ–Ω—Ç—Ä–æ–ª–µ–º –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º–∞
- ‚úÖ **SSE –ø–æ—Ç–æ–∫–∏** –¥–ª—è real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
- ‚úÖ **–ë–∞—Ç—á–∏–Ω–≥ –∑–∞–ø—Ä–æ—Å–æ–≤** –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è API
- ‚úÖ **–ú–µ—Ç—Ä–∏–∫–∏ —Å–∫–æ—Ä–æ—Å—Ç–∏** –∏ ETA —Ä–∞—Å—á—ë—Ç

### Frontend
- ‚úÖ **ProgressModal** - –∫—Ä–∞—Å–∏–≤—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä —Å live –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏
- ‚úÖ **useProgressModal** - —Ö—É–∫ –¥–ª—è –ø—Ä–æ—Å—Ç–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏ (—ç–ª/—Å–µ–∫) –∏ –æ—Å—Ç–∞–≤—à–µ–≥–æ—Å—è –≤—Ä–µ–º–µ–Ω–∏

## üîß –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### Backend –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ
–í—Å–µ —Ç—Ä–∏ endpoint'–∞ –æ–±–Ω–æ–≤–ª–µ–Ω—ã –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –Ω–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:

```bash
POST /api/projects/:id/articles/translate
POST /api/projects/:id/articles/enrich
POST /api/projects/:id/articles/ai-detect-stats
```

### Frontend –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

1. –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
```typescript
import { ProgressModal } from './components/ProgressModal';
import { useProgressModal } from './hooks/useProgressModal';
```

2. –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ–≥—Ä–µ—Å—Å-–º–æ–¥–∞–ª–∏:
```typescript
const translateProgress = useProgressModal({
  title: '–ü–µ—Ä–µ–≤–æ–¥ —Å—Ç–∞—Ç–µ–π',
  endpoint: `/api/projects/${projectId}/articles/translate`,
  onComplete: () => fetchArticles(),
});
```

3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤ JSX:
```tsx
<button onClick={() => translateProgress.start({ 
  untranslatedOnly: true, 
  useParallel: true 
})}>
  –ü–µ—Ä–µ–≤–µ—Å—Ç–∏
</button>

<ProgressModal {...translateProgress} />
```

## üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é](./docs/PROGRESS_MODAL_USAGE.md)
- [–°–≤–æ–¥–∫–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π](./docs/OPTIMIZATION_SUMMARY.md)

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:

```bash
cd apps/api
export OPENROUTER_API_KEY="your-key"
npx tsx test-optimizations.ts
```

## üìù –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### Backend
- `apps/api/src/lib/translate.ts` - –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–π –ø–µ—Ä–µ–≤–æ–¥
- `apps/api/src/lib/crossref.ts` - –±–∞—Ç—á–∏–Ω–≥ Crossref
- `apps/api/src/lib/stats.ts` - –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è AI-–¥–µ—Ç–µ–∫—Ü–∏—è
- `apps/api/src/routes/articles.ts` - SSE endpoints

### Frontend (–Ω–æ–≤—ã–µ)
- `apps/web/src/components/ProgressModal.tsx`
- `apps/web/src/hooks/useProgressModal.ts`

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- `docs/PROGRESS_MODAL_USAGE.md`
- `docs/OPTIMIZATION_SUMMARY.md`
- `docs/BATCHING_OPTIMIZATION.md` (—ç—Ç–æ—Ç —Ñ–∞–π–ª)

## üéØ API –ü–∞—Ä–∞–º–µ—Ç—Ä—ã

### –ü–µ—Ä–µ–≤–æ–¥
```typescript
{
  articleIds?: string[];        // –í—ã–±—Ä–∞–Ω–Ω—ã–µ —Å—Ç–∞—Ç—å–∏
  untranslatedOnly?: boolean;   // –¢–æ–ª—å–∫–æ –Ω–µ–ø–µ—Ä–µ–≤–µ–¥—ë–Ω–Ω—ã–µ
  useParallel?: boolean;        // –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º
  parallelCount?: number;       // 1-10, default: 3
}
```

### Crossref
```typescript
{
  articleIds?: string[];
  parallelCount?: number;       // 1-10, default: 5
}
```

### AI Statistics
```typescript
{
  articleIds?: string[];
  parallelCount?: number;       // 1-10, default: 5
}
```

## ‚ö° –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

- **–ü–µ—Ä–µ–≤–æ–¥**: `parallelCount: 3-5`, `batchSize: 5`
- **Crossref**: `parallelCount: 5-8`
- **AI Stats**: `parallelCount: 3-5`

### –¢–µ—Å—Ç—ã –Ω–∞ 100 —Å—Ç–∞—Ç—å—è—Ö

| –û–ø–µ—Ä–∞—Ü–∏—è | –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ | –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ (3) | –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ (5) |
|----------|-----------------|-----------------|-----------------|
| –ü–µ—Ä–µ–≤–æ–¥ | ~120 —Å–µ–∫ | ~30 —Å–µ–∫ | ~25 —Å–µ–∫ |
| Crossref | ~100 —Å–µ–∫ | ~20 —Å–µ–∫ | ~15 —Å–µ–∫ |
| AI Stats | ~250 —Å–µ–∫ | ~50 —Å–µ–∫ | ~35 —Å–µ–∫ |

## üö¶ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ Backend –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –∏ –≥–æ—Ç–æ–≤
2. ‚úÖ Frontend –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–æ–∑–¥–∞–Ω—ã
3. ‚è≥ –¢—Ä–µ–±—É–µ—Ç—Å—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ ArticlesSection
4. ‚è≥ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `parallelCount: 3` –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞ (—ç–∫–æ–Ω–æ–º–∏—è API)
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `parallelCount: 5-8` –¥–ª—è Crossref (–ø—É–±–ª–∏—á–Ω—ã–π API)
- –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ rate limits API
- –î–æ–±–∞–≤—å—Ç–µ retry –ª–æ–≥–∏–∫—É –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

## üêõ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

–ù–µ—Ç –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º. –ü—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –±–∞–≥–æ–≤ —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ issue.

## üìß –ö–æ–Ω—Ç–∞–∫—Ç—ã

–ü—Ä–∏ –≤–æ–ø—Ä–æ—Å–∞—Ö –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è–º –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∏–ª–∏ —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ issue.
